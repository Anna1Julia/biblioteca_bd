{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Livros</h2>

<form action="/livros/add" method="POST" class="row g-2 mb-4">
  <div class="col-md-3"><input name="titulo" class="form-control" placeholder="Título" required></div>
  <div class="col-md-2">
    <select name="autor" class="form-select">
      <option value="">Autor</option>
      {% for a in autores %}
      <option value="{{ a.ID_autor }}">{{ a.Nome_autor }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2"><input name="isbn" class="form-control" placeholder="ISBN"></div>
  <div class="col-md-1"><input name="ano" class="form-control" placeholder="Ano"></div>
  <div class="col-md-2">
    <select name="genero" class="form-select">
      <option value="">Gênero</option>
      {% for g in generos %}
      <option value="{{ g.ID_genero }}">{{ g.Nome_genero }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2">
    <select name="editora" class="form-select">
      <option value="">Editora</option>
      {% for e in editoras %}
      <option value="{{ e.ID_editora }}">{{ e.Nome_editora }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2 mt-2"><input name="quantidade" class="form-control" placeholder="Qtd"></div>
  <div class="col-md-6 mt-2"><input name="resumo" class="form-control" placeholder="Resumo"></div>
  <div class="col-md-2 mt-2"><button class="btn btn-primary w-100">Adicionar</button></div>
</form>

<table class="table table-striped align-middle">
  <thead class="table-dark">
    <tr><th>ID</th><th>Título</th><th>Autor</th><th>Gênero</th><th>Editora</th><th>Ano</th><th>Qtd</th><th>Ações</th></tr>
  </thead>
  <tbody>
    {% for l in livros %}
    <tr>
      <td>{{ l.ID_livro }}</td>
      <td>{{ l.Titulo }}</td>
      <td>{{ l.Nome_autor }}</td>
      <td>{{ l.Nome_genero }}</td>
      <td>{{ l.Nome_editora }}</td>
      <td>{{ l.Ano_publicacao }}</td>
      <td>{{ l.Quantidade_disponivel }}</td>
      <td><a href="/livros/delete/{{ l.ID_livro }}" class="btn btn-danger btn-sm">Excluir</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
